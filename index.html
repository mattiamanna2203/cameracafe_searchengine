 <!DOCTYPE html>
<html lang="it">
  <head>
      <meta charset="UTF-8">
      <title>Cerca l'episodio</title>

      <!--Importare gli stili css-->
      <link rel="stylesheet" href="Stili/CameraCafeInterface.css">
      <!--Rendere utilizzabili i pyscript-->
      <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
      <!--Rendere utilizzabili i pyscript-->
      <script defer src="https://pyscript.net/latest/pyscript.js"></script> 

     <!--Importare pacchetti da destinare a PyScript-->
      <py-config>packages=["pandas","nltk"]</py-config> <!--Pacchetti-->
      <py-script src="PyScript/Light_SearchEngine.py"></py-script> <!--Funzioni back-end,cuore della searchengine-->
      <py-script src="PyScript/events_listeners.py"></py-script> <!--Script contenente event listener utilizzati per richiamare le searchengine contenute nel file "PyScript/Light_SearchEngine.py".
      COME UTILIZZARE PYTHON E JAVASCRIPT INSIEME, utilizzare un python molto simile a JavaScript.-->
      
      
  </head>
  <body>

   <div>
      <p class="cartoony-text">Camera Cafe Search Engine</p>
       <p >Inserire delle parole chiave per ricercare un particolare episodio</p>
   </div>

   <div class="flexbox">
      <input class="barra-ricerca" placeholder="Inserire parole chiave">
      <button class="avvio" id="avvio-ricerca" > Avviare la ricerca </button> <!--py-click="query_ranking('paolo bitta',5)"-->
   </div>

    <main>
      <div class="stat-table-output" id="tabella">
        <table  id="tabella_output"></table>
      </div>
    </main>


  <script>
    // Define the GitHub repository details
    async function import_json(variabile_locale){

      data = sessionStorage.getItem(variabile_locale);

      var t =JSON.parse(data);

      const tkeys= Object.keys(t);
        let tableData=[];

        for (i=0; i < tkeys.length; i++ ){
          tableData.push(t[`${tkeys[i]}`]);
        }

      // Create the table element

      //Queste righe di codice servono a cancellare le vecchie tabelle, quando ne viene richiesta una nuova.
      var t=document.getElementById("tabella_output");
      var t_len =document.getElementById("tabella_output").rows.length;
      if (t_len!==0){
        t.remove()

        var table =  document.createElement('table');
        table.setAttribute("id", "tabella_output");

      }
      else{
        var table=document.getElementById("tabella_output");
      }



      // Create the table header row
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');

      // Iterate over the keys of the first object to create table headers
      Object.keys(tableData[0]).forEach(key => {
      const th = document.createElement('th');
      th.textContent = key;
      headerRow.appendChild(th);
      });

      thead.appendChild(headerRow);
      table.appendChild(thead);

      // Create the table body
      const tbody = document.createElement('tbody');

      // Iterate over the table data and create table rows
      tableData.forEach(rowData => {
      const row = document.createElement('tr');

      // Iterate over the values of each object to create table cells
      Object.values(rowData).forEach(value => {
          const cell = document.createElement('td');
          cell.textContent = value;
          row.appendChild(cell);
      });

      tbody.appendChild(row);
      });

      table.appendChild(tbody);

      // Append the table to the document body or any desired element


      // Add CSS styles to make the table header sticky
      var windowHeight = window.innerHeight;

        // Calculate the desired max height (e.g., 80% of the window height)
        var maxHeight = Math.floor(windowHeight * 0.8) + 'px';
      table.style.maxHeight =  maxHeight;


      document.body.appendChild(table);
    }
  </script>
  </body>
</html>
