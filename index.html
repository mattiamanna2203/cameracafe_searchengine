 <!DOCTYPE html>
<html lang="it">
  <head>
      <meta charset="UTF-8">
      <title>Cerca l'episodio</title>

      <!--Importare gli stili css-->
      
      <link rel="stylesheet" href="Stili/CameraCafeInterface.css">
      <!--Rendere utilizzabili i pyscript-->
      <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
      <!--Rendere utilizzabili i pyscript-->
      <script defer src="https://pyscript.net/latest/pyscript.js"></script>

      <!--Importare JavaScript-->
      <script src="Javascript/import_data.js"></script>
      <py-config>
      packages=["pandas","nltk"]
      </py-config>
      <py-script src="./Light_SearchEngine.py"></py-script>
  </head>
  <body>

   <div>
      <p class="cartoony-text">Camera Cafe Search Engine</p>
       <p >Inserire delle parole chiave per ricercare un particolare episodio</p>
   </div>

   <div class="flexbox">
      <input class="barra-ricerca" placeholder="Inserire parole chiave">
      <button class="avvio" id="avvio-ricerca" > Avviare la ricerca </button> <!--py-click="query_ranking('paolo bitta',5)"-->
   </div>

    <main>
      <div class="stat-table-output" id="tabella">
        <table  id="tabella_output"></table>
      </div>
    </main>
  </body>

<!--Tutorial su pyscript: https://www.youtube.com/watch?v=owopzp436jM-->
<!--https://stackoverflow.com/questions/74655110/set-js-sessionstorage-item-within-pyscript-->

<py-script>
from js import console, document, sessionStorage
from pyodide.ffi.wrappers import add_event_listener
from js import document as _DOC
def avvio_ricerca(*arg):
  stringa= document.querySelector(".barra-ricerca"); #estrarre la stringa digitata dall'utente.
  output = query_ranking(stringa.value,100)
  sessionStorage.setItem('database',output.to_json(orient='records'))
  dati = sessionStorage.getItem('database');
  js.import_json()

avv = document.getElementById("avvio-ricerca")
add_event_listener(avv, "click", avvio_ricerca)
</py-script>

<!--<script src="Javascript/buttons.js"></script>-->
</html>
